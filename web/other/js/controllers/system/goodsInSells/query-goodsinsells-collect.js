app.controller("queryGoodsinsellsCollect",["$scope","$uibModal","toaster","httpJsonHandle","myConstants","$translate",function(o,t,n,a,s,e){o.myConstants=s,o.d0_1=[[0,7],[1,6.5],[2,12.5],[3,7],[4,9],[5,6],[6,11],[7,6.5],[8,8],[9,7]],o.d0_2=[[0,4],[1,4.5],[2,7],[3,4.5],[4,3],[5,3.5],[6,6],[7,3],[8,4],[9,3]],o.d1_1=[[10,120],[20,70],[30,70],[40,60]],o.d1_2=[[10,50],[20,60],[30,90],[40,35]],o.d1_3=[[10,80],[20,40],[30,30],[40,20]],o.collectByGoodsData=[],o.collectByDeviceData=[],o.queryGoodsInSellsCollectData={sessionId:o.app.myData.sessionId,customerId:"",stationId:"",deviceId:"",startTime:"2001-01-01",endTime:"2099-02-02"},o.payTypes=s.payTypes,o.eventTypes=s.eventTypes,o.filterOptions={filterText:"",useExternalFilter:!0},o.totalServerItems=0,o.pagingOptions={pageSizes:[10,15,25,50,100],pageSize:15,currentPage:1},o.columnDefs=[{field:"stationId",displayName:e.instant("items.stationManage.stationId"),width:"*"},{field:"stationName",displayName:"站点名称",width:"*"},{field:"amount",displayName:"总金额",width:"*",cellFilter:"filterMoney"}],o.callback=function(t){o.myData=t.collectByStation,o.totalServerItems=t.allCount,n.clear(),o.collectByGoodsData=t.collectBygoods,o.collectByDeviceData=t.collectByDevice},o.setPagingData=function(t,e){o.queryGoodsInSellsCollectData.offset=1==t?0:(t-1)*e,o.queryGoodsInSellsCollectData.limit=e,a.myPost2(s.URL.systemUrl,o.queryGoodsInSellsCollectData,s.msgIdName.queryGoodsInSellsCollectMsgId,s.msgIdName.queryGoodsInSellsCollectMsgName,o.callback)},o.getPagedDataAsync=function(t,e,a){setTimeout(function(){n.pop("wait",constantsLang[o.app.myData.lang].load.reqData,constantsLang[o.app.myData.lang].load.loadingData),o.setPagingData(e,t)},100)},o.$watch("pagingOptions",function(t,e){t!==e&&o.getPagedDataAsync(o.pagingOptions.pageSize,o.pagingOptions.currentPage,o.filterOptions.filterText)},!0),o.$watch("filterOptions",function(t,e){t!==e&&o.getPagedDataAsync(o.pagingOptions.pageSize,o.pagingOptions.currentPage,o.filterOptions.filterText)},!0),o.gridOptions={i18n:"undefined"!=o.app.myData.lang?o.app.myData.lang:"zh-cn",data:"myData",enablePaging:!0,showFooter:!1,footerRowHeight:40,totalServerItems:"totalServerItems",pagingOptions:o.pagingOptions,enableColumnResizing:!0,rowHeight:28,enableRowSelection:!0,multiSelect:!1,columnDefs:"columnDefs",enableColumnResize:!0,showSelectionCheckbox:!0,noUnselect:!0,filterOptions:o.filterOptions},o.goQuery=function(){o.inData(),o.getPagedDataAsync(o.pagingOptions.pageSize,1,o.filterOptions.filterText)},o.inData=function(){var t,e;void 0!==o.info&&"undefined"!=o.info.customerId?(o.queryGoodsInSellsCollectData.customerId=o.info.customerId,void 0!==o.info.stationId&&"0"!=o.queryGoodsInSellsCollectData.stationId?(o.queryGoodsInSellsCollectData.stationId=o.info.stationId,void 0!==o.info.deviceId&&"0"!=o.info.deviceId?(o.queryGoodsInSellsCollectData.deviceId=o.info.deviceId,o.startDate=$("#startDate").val(),o.stopDate=$("#stopDate").val(),t="2019-01-01",e="2100-01-01",""!=o.startDate&&(t=o.startDate),""!=o.stopDate&&(e=o.stopDate),o.queryGoodsInSellsCollectData.startTime=t,o.queryGoodsInSellsCollectData.stopTime=e):n.pop("info",constantsLang[o.app.myData.lang].tips.tip,"请选择售卖机")):n.pop("info",constantsLang[o.app.myData.lang].tips.tip,"请选择站点")):n.pop("info",constantsLang[o.app.myData.lang].tips.tip,"请选择客户")}}]);